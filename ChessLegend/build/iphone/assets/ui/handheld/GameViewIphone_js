function GameView(){var e=myChess.width,s=myChess.boardSize,t=Ti.UI.createView({width:myChess.width-20,height:176,bottom:5,left:0}),i=Ti.UI.createView({bottom:90,right:6,width:s-125,height:80}),a=Ti.UI.createView({top:45,left:0,width:s,height:s+12});a.add(myChess.chessObj.board);var r=Ti.UI.createView({backgroundColor:"white",opacity:.5,left:0,top:0,height:16,width:210}),o=Ti.UI.createLabel({font:{fontSize:13,fontWeight:"bold",fontFamily:"Arial"},color:"black",text:"",textAlign:"left"}),n=Ti.UI.createView({right:0,top:myChess.boardSize+12-16,height:16,width:210,backgroundColor:"black",opacity:.5}),h=Ti.UI.createLabel({font:{fontSize:13,fontWeight:"bold",fontFamily:"Arial"},color:"white",text:"",textAlign:"right"});r.add(o),a.add(r),n.add(h),a.add(n);var c=Ti.UI.createView({top:0,left:0,width:320,height:550,backgroundImage:Ti.Filesystem.resourcesDirectory+"images/gamebackh.png"}),b=require("ui/handheld/NotationViewIphone"),d=require("ui/handheld/ControlViewIphone"),f=new d(s-125,80);i.add(f),c.add(a),c.blacku=o,c.whiteu=h,c.add(t),c.add(i),c.control=f;var m=Ti.UI.createView({height:150,width:200,right:10,top:-500,backgroundColor:"white",opacity:.8,color:"black"}),u=Ti.UI.createButton({height:30,width:150,title:"Email PGN file",top:10});u.addEventListener("click",function(){myChess.f.emailPGN(),m.top=-500});var p=Ti.UI.createButton({height:30,width:150,title:"Copy to Clipboard",top:50});p.addEventListener("click",function(){myChess.f.copyPGN(),m.top=-500});var l=Ti.UI.createButton({height:30,width:150,title:"Cancel",top:90});l.addEventListener("click",function(){m.top=-500}),m.add(u),m.add(p),m.add(l),c.add(m);var w=Ti.UI.createButton({width:30,height:25,top:8,right:5,backgroundImage:Ti.Filesystem.resourcesDirectory+"images/exportButton.png"});w.addEventListener("click",function(){m.top=30}),c.add(w);var y=Ti.UI.createButton({width:25,height:32,bottom:136,right:10,backgroundImage:Ti.Filesystem.resourcesDirectory+"images/soundoff.png"});y.addEventListener("click",function(){1==myChess.isSound?(myChess.isSound=!1,this.backgroundImage=Ti.Filesystem.resourcesDirectory+"images/soundoff.png"):(myChess.isSound=!0,this.backgroundImage=Ti.Filesystem.resourcesDirectory+"images/soundon.png")}),c.add(y);var v=Ti.UI.createButton({width:24,height:36,top:45+myChess.boardSize/2-12,left:0,backgroundImage:Ti.Filesystem.resourcesDirectory+"images/flipButton.png"});v.addEventListener("click",function(){myChess.flip=myChess.flip?!1:!0;var e=Ti.UI.create2DMatrix();myChess.flip?(n.top=0,n.right=myChess.boardSize-n.width,r.top=myChess.boardSize+12-16,r.left=myChess.boardSize-r.width,e=e.rotate(180),myChess.chessObj.board.animate({transform:e,duration:500}),myChess.f.flipPieces(180),myChess.chessObj.board.backgroundImage="images/chessboard1.png",myChess.chessObj.resultV.setTransform(Ti.UI.create2DMatrix({rotate:180}))):(n.top=myChess.boardSize+12-16,n.right=0,r.top=0,r.left=0,e=e.rotate(0),myChess.chessObj.board.animate({transform:e,duration:500}),myChess.f.flipPieces(0),myChess.chessObj.board.backgroundImage="images/chessboard.png",myChess.chessObj.resultV.setTransform(Ti.UI.create2DMatrix({rotate:0})))}),c.add(v);var g=Ti.UI.createButton({width:30,height:30,top:5,right:36,backgroundImage:Ti.Filesystem.resourcesDirectory+"images/favoritebutton.png"});g.addEventListener("click",function(){Ti.API.info("adding"),myChess.JDB.addFavorite();var e=Ti.UI.createLabel({text:"favorite!",top:40,right:60,color:"991133",font:{fontSize:21}});c.add(e),e.animate({top:40,right:-100,duration:1500},function(){c.remove(e)})}),c.add(g);Ti.UI.createLabel({width:36,height:10,top:4,right:50,text:"favorite"});return c.addEventListener("openAgame",function(){myChess.Players[myChess.PlayerIndex];myChess.chessObj.game=myChess.Games[myChess.PlayerIndex].games[myChess.chessObj.gameIndex],myChess.f.getPiecesStatus(),c.notation&&(t.remove(c.notation),c.noation=null);var i=new b(e,s);c.notation=i,t.add(c.notation),c.blacku.text=myChess.chessObj.game.BlackElo?myChess.chessObj.game.Black+" ("+myChess.chessObj.game.BlackElo+")     ":myChess.chessObj.game.Black+"       ",c.whiteu.text=myChess.chessObj.game.WhiteElo?myChess.chessObj.game.White+" ("+myChess.chessObj.game.WhiteElo+")     ":myChess.chessObj.game.White+"       ",myChess.f.resetPieces()}),c.addEventListener("click",function(){myChess.chessObj.resultV.fireEvent("hide")}),c}module.exports=GameView;