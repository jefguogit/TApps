function GameView(e,t){Ti.API.log("game view :"+e+"  "+t);var s=e-myChess.boardSize-20,i=t-50,a=myChess.boardSize,r=Ti.UI.createButton({top:15,left:10,width:100,height:50,backgroundImage:null});r.addEventListener("click",function(){b.fireEvent("backToList")});var o=Ti.UI.createView({bottom:50,right:70,width:a-80,height:45}),n=Ti.UI.createView({top:60,left:5,width:s,height:i}),h=require("ui/tablet/NotationViewIpad"),c=require("ui/tablet/NameViewIpad"),d=new c(a,120),l=Ti.UI.createView({top:10,left:70+s,width:a,height:110});l.add(d);var m=Ti.UI.createView({bottom:90,right:8,width:a,height:a});m.add(myChess.chessObj.board);var b=Ti.UI.createView({width:e,height:t,right:0}),f=require("ui/tablet/ControlViewIpad"),u=new f(a-80,45);o.add(u),b.add(r),b.add(m),b.add(n),b.add(o),b.control=u,b.add(l),b.nameView=d;var p=Ti.UI.createButton({width:45,height:45,bottom:50,right:20,backgroundImage:Ti.Filesystem.resourcesDirectory+"images/soundoff.png"});p.addEventListener("click",function(){1==myChess.isSound?(myChess.isSound=!1,this.backgroundImage=Ti.Filesystem.resourcesDirectory+"images/soundoff.png"):(myChess.isSound=!0,this.backgroundImage=Ti.Filesystem.resourcesDirectory+"images/soundon.png")}),b.add(p);var g=Ti.UI.createButton({width:38,height:57,bottom:50+myChess.boardSize/2-30,right:0,backgroundImage:Ti.Filesystem.resourcesDirectory+"images/flipButton.png"});g.addEventListener("click",function(){myChess.flip=myChess.flip?!1:!0;var e=Ti.UI.create2DMatrix();myChess.flip?(e=e.rotate(180),myChess.chessObj.board.animate({transform:e,duration:500}),myChess.chessObj.board.backgroundImage="images/chessboard1.png",myChess.chessObj.resultV.setTransform(Ti.UI.create2DMatrix({rotate:180})),myChess.f.flipPieces(180)):(e=e.rotate(0),myChess.chessObj.board.animate({transform:e,duration:500}),myChess.chessObj.board.backgroundImage="images/chessboard.png",myChess.chessObj.resultV.setTransform(Ti.UI.create2DMatrix({rotate:0})),myChess.f.flipPieces(0))}),b.add(g);var y=Ti.UI.createButton({width:45,height:45,top:25,right:27,backgroundImage:Ti.Filesystem.resourcesDirectory+"images/favorbutton.png"});return y.addEventListener("click",function(){Ti.API.info("adding"),myChess.JDB.addFavorite();var e=Ti.UI.createLabel({text:"favorite!",top:30,right:270,color:"991133",font:{fontSize:27}});b.add(e),e.animate({top:40,right:-100,duration:1500},function(){b.remove(e)})}),b.add(y),b.addEventListener("openAgame",function(e){myChess.chessObj.gameIndex=e.game,myChess.chessObj.game=myChess.Games[myChess.PlayerIndex].games[myChess.chessObj.gameIndex],myChess.f.getPiecesStatus(),this.notation&&(n.remove(this.notation),b.noation=null);var t=new h(s,a);if(b.notation=t,n.add(b.notation),this.nameView){var i=myChess.chessObj.game;this.nameView.white.text=i.White,this.nameView.black.text=i.Black,this.nameView.welo.text=i.WhiteElo,this.nameView.belo.text=i.BlackElo;var r=i.Event;(null==r||r.indexOf("?")>-1)&&(r=i.Site,(null==r||r.indexOf("?")>-1)&&(r=" ")),this.nameView.eventu.text=r;var o=i.Round;(null==o||o.indexOf("?")>-1)&&(o=""),this.nameView.round.text=o;var c=i.Year;i.Date&&i.Date.length>0&&(c=i.Year+"."+i.Date),this.nameView.date.text=c,this.nameView.eco.text=i.ECO,this.nameView.result.text=i.Result}myChess.f.resetPieces();var d=Ti.UI.createView({height:150,width:200,left:80,bottom:-500,backgroundColor:"white",opacity:.8,color:"black"}),l=Ti.UI.createButton({height:30,width:150,title:"Email PGN file",top:10});l.addEventListener("click",function(){myChess.f.emailPGN(),d.bottom=-500});var m=Ti.UI.createButton({height:30,width:150,title:"Copy to Clipboard",top:50});m.addEventListener("click",function(){myChess.f.copyPGN(),d.bottom=-500});var f=Ti.UI.createButton({height:30,width:150,title:"Cancel",top:90});f.addEventListener("click",function(){d.bottom=-500}),d.add(l),d.add(m),d.add(f),b.add(d);var u=Ti.UI.createButton({bottom:15,left:60,width:100,height:50,backgroundImage:null});u.addEventListener("click",function(){d.bottom=60}),b.add(u),myChess.chessObj.playModeInProgress&&(myChess.chessObj.currentMove=0,myChess.chessObj.playModeInProgress=!1,b.control.backgroundImage=Ti.Filesystem.resourcesDirectory+"mydata/icon/chessControl0.png")}),b.fireEvent("openAgame",{game:myChess.chessObj.gameIndex}),b}module.exports=GameView;